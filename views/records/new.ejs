<%- include('../partials/header-standalone') %>

<div class="mb-6">
    <a href="/zones/<%= zone.name %>" class="text-blue-600 hover:text-blue-700 flex items-center mb-4">
        <i class="fas fa-arrow-left mr-2"></i>
        Back to <%= zone.name %>
    </a>
    <h3 class="text-2xl font-bold text-gray-800">Add DNS Record</h3>
    <p class="text-gray-600 mt-1">Create a new DNS record for <%= zone.name %></p>
</div>

<% if (typeof error !== 'undefined' && error) { %>
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4">
        <%= error %>
    </div>
<% } %>

<div class="content-card max-w-2xl">
    <form method="POST" action="/records/zone/<%= zone.name %>" class="space-y-6">
        <div class="form-group">
            <label for="name" class="form-label">Record Name *</label>
            <input type="text" id="name" name="name" class="form-input" placeholder="@ or subdomain" required>
            <p class="form-help">Use @ for root domain, or enter a subdomain (e.g., www, mail)</p>
        </div>

        <div class="form-group">
            <label for="type" class="form-label">Record Type *</label>
            <select id="type" name="type" class="form-input" required>
                <option value="A">A - IPv4 Address</option>
                <option value="AAAA">AAAA - IPv6 Address</option>
                <option value="CNAME">CNAME - Canonical Name</option>
                <option value="MX">MX - Mail Exchange</option>
                <option value="TXT">TXT - Text Record</option>
                <option value="NS">NS - Name Server</option>
                <option value="PTR">PTR - Pointer</option>
                <option value="SRV">SRV - Service</option>
            </select>
        </div>

        <div class="form-group">
            <label for="value" class="form-label">Value *</label>
            <input type="text" id="value" name="value" class="form-input" placeholder="192.168.1.1" required>
            <p class="form-help">IP address, hostname, or value for this record</p>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div class="form-group">
                <label for="ttl" class="form-label">TTL (seconds)</label>
                <input type="number" id="ttl" name="ttl" class="form-input" value="3600">
            </div>

            <div class="form-group" id="priority-group" style="display: none;">
                <label for="priority" class="form-label">Priority</label>
                <input type="number" id="priority" name="priority" class="form-input" placeholder="10">
            </div>
        </div>

        <div class="bg-yellow-50 border border-yellow-200 rounded p-4">
            <h4 class="font-semibold text-yellow-900 mb-2">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                Important
            </h4>
            <p class="text-sm text-yellow-800">
                Record will be added to zone file and Bind will be reloaded automatically.
                Make sure the record format is correct to avoid DNS errors.
            </p>
        </div>

        <div class="flex items-center space-x-4">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save mr-2"></i>
                Add Record
            </button>
            <a href="/zones/<%= zone.name %>" class="btn">
                Cancel
            </a>
        </div>
    </form>
</div>

<script>
    document.getElementById('type').addEventListener('change', function() {
        const priorityGroup = document.getElementById('priority-group');
        if (this.value === 'MX' || this.value === 'SRV') {
            priorityGroup.style.display = 'block';
        } else {
            priorityGroup.style.display = 'none';
        }
    });
</script>

<%- include('../partials/footer-standalone') %>

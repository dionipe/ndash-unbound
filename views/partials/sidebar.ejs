<aside class="w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col shadow-xl">
    <!-- Logo Section -->
    <div class="p-6 border-b border-gray-700">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                <i class="fas fa-network-wired text-xl"></i>
            </div>
            <div>
                <h1 class="text-xl font-bold">NDash</h1>
                <p class="text-xs text-gray-400">Unbound DNS Manager</p>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-3 py-4 space-y-1 overflow-y-auto">
        <a href="/" class="nav-item <%= title === 'NDash - Unbound DNS Dashboard' ? 'active' : '' %>">
            <i class="fas fa-th-large"></i>
            <span>Dashboard</span>
        </a>
        
        <a href="/zones" class="nav-item <%= title === 'DNS Zones' || title.includes('Zone') ? 'active' : '' %>">
            <i class="fas fa-globe"></i>
            <span>DNS Zones</span>
        </a>
        
        <div class="pt-4 pb-2">
            <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Management</p>
        </div>
        
        <a href="/zones/new/create" class="nav-item">
            <i class="fas fa-plus-circle"></i>
            <span>Create Zone</span>
        </a>
        
        <button onclick="reloadUnboundFromSidebar()" class="nav-item w-full text-left">
            <i class="fas fa-sync-alt" id="reload-icon-sidebar"></i>
            <span>Reload Unbound</span>
        </button>
        
        <a href="/settings" class="nav-item">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </a>
        
        <div class="pt-4 pb-2">
            <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">System</p>
        </div>
        
        <a href="/monitoring" class="nav-item">
            <i class="fas fa-chart-bar"></i>
            <span>Monitoring</span>
        </a>
        
        <a href="/statistics" class="nav-item <%= title === 'Statistics - NDash' ? 'active' : '' %>">
            <i class="fas fa-chart-pie"></i>
            <span>DNS Statistics</span>
        </a>
        
        <a href="/statistics/resolver" class="nav-item <%= title === 'Resolver Statistics - NDash' ? 'active' : '' %>">
            <i class="fas fa-server"></i>
            <span>Resolver Statistics</span>
        </a>
        
        <a href="/adblock" class="nav-item <%= title === 'DNS Adblock - NDash' ? 'active' : '' %>">
            <i class="fas fa-shield-alt"></i>
            <span>DNS Adblock</span>
        </a>
        
        <a href="/activity" class="nav-item">
            <i class="fas fa-history"></i>
            <span>Activity Log</span>
        </a>
    </nav>

    <!-- User Section -->
    <div class="p-4 border-t border-gray-700">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center">
                <i class="fas fa-user"></i>
            </div>
            <div class="flex-1">
                <p class="text-sm font-medium">Administrator</p>
                <p class="text-xs text-gray-400">System Admin</p>
            </div>
            <button class="text-gray-400 hover:text-white">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </div>
</aside>

<script>
function reloadUnboundFromSidebar() {
    const icon = document.getElementById('reload-icon-sidebar');
    icon.classList.add('fa-spin');
    
    fetch('/zones/reload', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        icon.classList.remove('fa-spin');
        if (data.success) {
            // Show success message
            showNotification(data.message, 'success');
        }
    })
    .catch(error => {
        icon.classList.remove('fa-spin');
        showNotification('Failed to reload Unbound', 'error');
    });
}

function showNotification(message, type) {
    const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
    const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';
    
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
    notification.innerHTML = `<i class="fas ${icon} mr-2"></i>${message}`;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transition = 'opacity 0.5s';
        setTimeout(() => notification.remove(), 500);
    }, 3000);
}
</script>
